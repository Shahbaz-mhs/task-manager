<!DOCTYPE html>
<html>
{{>header}}
<body>
<link rel="stylesheet"  href="/css/styles.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">





<div class="container">
  <div class="row">
    <div class="col-12">
        <h1>Edit Profile</h1>
        <hr>
      {{!-- <a class="btn btn-primary" href="/task/add">Add Task</a> --}}



     
  <form method="POST" name="myForm" action="/users_update/me" enctype="multipart/form-data">
  <div class="form-group row">
    <label for="inputEmail3" class="col-sm-2 col-form-label">Name</label>
    <div class="col-sm-5">
      <input type="text" class="form-control" id="name" name="name" value="{{profile.name}}" placeholder="Name">
    </div>
  </div>

  <div class="form-group row">
    <label for="inputEmail3" class="col-sm-2 col-form-label">Username</label>
    <div class="col-sm-5">
      <input type="text" class="form-control" id="email" name="email" value="{{profile.email}}" placeholder="Username">
    </div>
  </div>

  <div class="form-group row">
    <label for="inputPassword3" class="col-sm-2 col-form-label">Password</label>
    <div class="col-sm-5">
      <input type="password" class="form-control" id="password" name="password" placeholder="password">
    </div>
  </div>

  <div class="form-group row">
    <label for="inputEmail3" class="col-sm-2 col-form-label">Profile</label>
    <div class="col-sm-5">
      <input type="file" class="form-control" id="avatar" name="avatar" placeholder="avatar" >
      <br>
      <img src="/avatars/{{profile.avatar}}" width="20%" style="border-radius: 20px;" alt="avatar">
    </div>
    
    
  </div>
  
  <div class="form-group row">
    <div class="col-sm-10" style="">
      <a href="/task" class="btn btn-secondary">Cancel</a>
      <button type="submit" class="btn btn-primary" onclick="return validateForm()">Update</button>
    </div>
  </div>
</form>


      
    </div>
  </div>
</div>
<div style="height:20px;">

</div>

<script>
/*
$("#avatar").change(function() {
  var fileInput = document.getElementById('avatar');
  var file = fileInput.files[0];
  var formData = new FormData();
  formData.append('file', file);
  alert(file);

   $.ajax({
        url: "/users/me/avatar",
        type: "POST",
        data: "file="+file,
        cache: false,

        success: function(reponse) {
          if(reponse) {
            alert(reponse);

            // console.log(reponse);
            // $('#devis').trigger("reset");
          } else {
            alert('Erreur');
          }
        }
      });
 })





$(function () {
  $(".image_selection").click(function () {
    alert('seletec');
    var idimg = $(this).attr('id');
    $.ajax({
      type: 'GET',
      data: encodeURIComponent(idimg),
      url: 'http://localhost:3001/new',
      
    });
  });
}); */
</script>

<script>

  function validateForm() {
  let name = document.forms["myForm"]["name"].value;
  let email = document.forms["myForm"]["email"].value;
  let avatar= document.forms["myForm"]["avatar"].value;
  
  if (name == "") {
    alert("Name must be filled out");
    return false;
  }

  let password= document.forms["myForm"]["password"].value;
  var pass=document.getElementById("password");
  if(!password){
    pass.remove();
  }
    
 
}

</script>

</body>
{{>footer}}
</html>